{% extends 'base.html' %}

{% block title %}日志{% endblock %}

{% block beforehead %}

<script>

function initVM(data) {
    $('#div-blogs').show();
    var vm = new Vue({
        el: '#div-blogs',
        data: {
            blogs: data.blogs,
            page: data.page
        },
        methods:{
            previous: function(){
                gotoPage(this.page.page_index-1);
            },
            next: function(){
                gotoPage(this.page.page_index+1);
            }
        }
    });
}

$(function(){
    requestApi('/api/blogs?page={{ page_index }}', 'GET',function(err,results){
        if(err){
            return showError(err);
        }
        $('#div-loading').hide();
        initVM(results);
    });
});

</script>

{% endblock %}

{% block content %}

    <div class="uk-width-medium-3-4">
        <!-- 这是一段注释。注释不会在浏览器中显示。-->
        <div id="div-blogs" class="uk-width-1-1" style="display:none">
            <div v-repeat="blog: blogs">
                <article class="uk-article">
                    <h2><a v-attr="href: '/blog/'+blog.id" v-text="blog.title"></a></h2>
                    <p class="uk-article-meta">发表于<span v-text="blog.pub_date"></span></p>
                    <p><span v-text="blog.summary"></span></p>
                    <p><a v-attr="href: '/blog/'+blog.id">继续阅读<i class="uk-icon-angle-double-right"></i></a></p>
                </article>
                <hr class="uk-article-divider"/>
            </div>

            <div class="uk-width-1-1 uk-text-center">
                <ul class="uk-pagination">
                    <li v-if="! page.has_previous" class="uk-disabled"><span><i class="uk-icon-angle-double-left"></i></span></li>   
                    <li v-if="page.has_previous"><a v-on="click: previous()" href="#0"><i class="uk-icon-angle-double-left"></i></a></li>   
                    <li class="uk-active"><span v-text="page.page_index"></span></li>
                    <li v-if="! page.has_next" class="uk-disabled"><span><i class="uk-icon-angle-double-right"></i></span></li>   
                    <li v-if="page.has_next"><a v-on="click: next()" href="#0"><i class="uk-icon-angle-double-right"></i></a></li>   
                </ul>
            </div>
        </div>
    </div>
    
    <div class="uk-width-medium-1-4">
        <div data-uk-sticky="{top:60}">
            <div class="uk-panel uk-panel-header">
                <h3 class="uk-penal-title">友情链接</h3>
                <ul class="uk-list uk-list-line">
                    <li><i class="uk-icon-thumbs-o-up"></i><a target="_blank" href="http://liaoxuefeng.com/">编程</a></li>
                    <li><i class="uk-icon-thumbs-o-up"></i><a target="_blank" href="http://liaoxuefeng.com/">读书</a></li>
                    <li><i class="uk-icon-thumbs-o-up"></i><a target="_blank" href="http://liaoxuefeng.com/">Python教程</a></li>
                    <li><i class="uk-icon-thumbs-o-up"></i><a target="_blank" href="http://liaoxuefeng.com/">Git教程</a></li>
                </ul>
            </div>
        </div>
    </div>

{% endblock %}
